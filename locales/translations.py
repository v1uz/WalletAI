# Localization dictionary for WalletAI
translations = {
    'EN': {
        # General
        'welcome': "ðŸŽ‰ Welcome to WalletAI!",
        'welcome_back': "ðŸ‘‹ Welcome back!",
        'cancel': "âŒ Cancel",
        'back': "â—€ï¸ Back",
        'yes': "Yes",
        'no': "No",
        'skip': "Skip",
        'done': "Done",
        
        # Main menu
        'add_transaction': "âž• Add Transaction",
        'check_balance': "ðŸ’° Balance",
        'reports': "ðŸ“Š Reports",
        'settings': "âš™ï¸ Settings",
        
        # Transaction messages
        'add_success': "âœ… Transaction added successfully!",
        'transaction_type_prompt': "Select transaction type:",
        'income': "ðŸ’° Income",
        'expense': "ðŸ’¸ Expense",
        'enter_amount': "Enter amount:",
        'select_category': "Select category:",
        'enter_description': "Enter description (or /skip):",
        'invalid_amount': "âŒ Invalid amount. Please enter a valid number:",
        
        # Balance
        'balance_title': "ðŸ’° Your Financial Summary",
        'balance_current': "Balance",
        'total_income': "Total Income",
        'total_expense': "Total Expenses",
        'this_month': "This Month",
        'today': "Today",
        'spent': "Spent",
        
        # Categories
        'manage_categories': "ðŸ“‚ Manage Categories",
        'add_category': "âž• Add Category",
        'edit_category': "âœï¸ Edit Category",
        'delete_category': "ðŸ—‘ï¸ Delete Category",
        'category_created': "âœ… Category created successfully!",
        'category_deleted': "âœ… Category deleted successfully!",
        'no_custom_categories': "No custom categories yet",
        
        # Settings
        'settings_title': "âš™ï¸ Settings",
        'language_setting': "ðŸŒ Language",
        'currency_setting': "ðŸ’± Currency",
        'select_language': "Select Language",
        'select_currency': "Select Currency",
        'language_updated': "âœ… Language updated!",
        'currency_updated': "âœ… Currency updated!",
        
        # Recurring
        'recurring_transactions': "ðŸ”„ Recurring Transactions",
        'add_recurring': "âž• Add Recurring",
        'view_recurring': "ðŸ“‹ View All",
        'remove_recurring': "ðŸ—‘ï¸ Remove",
        'recurring_created': "âœ… Recurring transaction created!",
        'frequency_daily': "Daily",
        'frequency_weekly': "Weekly",
        'frequency_monthly': "Monthly",
        'frequency_yearly': "Yearly",
        
        # Export
        'export_data': "ðŸ“Š Export Data",
        'all_transactions': "All Transactions",
        'this_month_export': "This Month",
        'last_30_days': "Last 30 Days",
        'this_year': "This Year",
        'export_complete': "ðŸ“Š Export Complete!",
        'no_transactions': "No transactions found for this period.",
        
        # Errors
        'error_occurred': "âŒ An error occurred. Please try again.",
        'not_found': "Not found",
        'invalid_input': "Invalid input",
    },
    
    'RU': {
        # General
        'welcome': "ðŸŽ‰ Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² WalletAI!",
        'welcome_back': "ðŸ‘‹ Ð¡ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸ÐµÐ¼!",
        'cancel': "âŒ ÐžÑ‚Ð¼ÐµÐ½Ð°",
        'back': "â—€ï¸ ÐÐ°Ð·Ð°Ð´",
        'yes': "Ð”Ð°",
        'no': "ÐÐµÑ‚",
        'skip': "ÐŸÑ€Ð¾Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ",
        'done': "Ð“Ð¾Ñ‚Ð¾Ð²Ð¾",
        
        # Main menu
        'add_transaction': "âž• Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸ÑŽ",
        'check_balance': "ðŸ’° Ð‘Ð°Ð»Ð°Ð½Ñ",
        'reports': "ðŸ“Š ÐžÑ‚Ñ‡ÐµÑ‚Ñ‹",
        'settings': "âš™ï¸ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸",
        
        # Transaction messages
        'add_success': "âœ… Ð¢Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ñ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð°!",
        'transaction_type_prompt': "Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ‚Ð¸Ð¿ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¸:",
        'income': "ðŸ’° Ð”Ð¾Ñ…Ð¾Ð´",
        'expense': "ðŸ’¸ Ð Ð°ÑÑ…Ð¾Ð´",
        'enter_amount': "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÑÑƒÐ¼Ð¼Ñƒ:",
        'select_category': "Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ:",
        'enter_description': "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ (Ð¸Ð»Ð¸ /skip):",
        'invalid_amount': "âŒ ÐÐµÐ²ÐµÑ€Ð½Ð°Ñ ÑÑƒÐ¼Ð¼Ð°. Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾Ðµ Ñ‡Ð¸ÑÐ»Ð¾:",
        
        # Balance
        'balance_title': "ðŸ’° Ð’Ð°ÑˆÐ° Ñ„Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ð°Ñ ÑÐ²Ð¾Ð´ÐºÐ°",
        'balance_current': "Ð‘Ð°Ð»Ð°Ð½Ñ",
        'total_income': "ÐžÐ±Ñ‰Ð¸Ð¹ Ð´Ð¾Ñ…Ð¾Ð´",
        'total_expense': "ÐžÐ±Ñ‰Ð¸Ðµ Ñ€Ð°ÑÑ…Ð¾Ð´Ñ‹",
        'this_month': "Ð’ ÑÑ‚Ð¾Ð¼ Ð¼ÐµÑÑÑ†Ðµ",
        'today': "Ð¡ÐµÐ³Ð¾Ð´Ð½Ñ",
        'spent': "ÐŸÐ¾Ñ‚Ñ€Ð°Ñ‡ÐµÐ½Ð¾",
        
        # Categories
        'manage_categories': "ðŸ“‚ Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑÐ¼Ð¸",
        'add_category': "âž• Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ",
        'edit_category': "âœï¸ Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ",
        'delete_category': "ðŸ—‘ï¸ Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ",
        'category_created': "âœ… ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑÐ¾Ð·Ð´Ð°Ð½Ð°!",
        'category_deleted': "âœ… ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑƒÐ´Ð°Ð»ÐµÐ½Ð°!",
        'no_custom_categories': "ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹ Ð¿Ð¾ÐºÐ° Ð½ÐµÑ‚",
        
        # Settings
        'settings_title': "âš™ï¸ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸",
        'language_setting': "ðŸŒ Ð¯Ð·Ñ‹Ðº",
        'currency_setting': "ðŸ’± Ð’Ð°Ð»ÑŽÑ‚Ð°",
        'select_language': "Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÑÐ·Ñ‹Ðº",
        'select_currency': "Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð²Ð°Ð»ÑŽÑ‚Ñƒ",
        'language_updated': "âœ… Ð¯Ð·Ñ‹Ðº Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½!",
        'currency_updated': "âœ… Ð’Ð°Ð»ÑŽÑ‚Ð° Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð°!",
        
        # Recurring
        'recurring_transactions': "ðŸ”„ ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€ÑÑŽÑ‰Ð¸ÐµÑÑ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¸",
        'add_recurring': "âž• Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€ÑÑŽÑ‰ÑƒÑŽÑÑ",
        'view_recurring': "ðŸ“‹ ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ð²ÑÐµ",
        'remove_recurring': "ðŸ—‘ï¸ Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ",
        'recurring_created': "âœ… ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€ÑÑŽÑ‰Ð°ÑÑÑ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ñ ÑÐ¾Ð·Ð´Ð°Ð½Ð°!",
        'frequency_daily': "Ð•Ð¶ÐµÐ´Ð½ÐµÐ²Ð½Ð¾",
        'frequency_weekly': "Ð•Ð¶ÐµÐ½ÐµÐ´ÐµÐ»ÑŒÐ½Ð¾",
        'frequency_monthly': "Ð•Ð¶ÐµÐ¼ÐµÑÑÑ‡Ð½Ð¾",
        'frequency_yearly': "Ð•Ð¶ÐµÐ³Ð¾Ð´Ð½Ð¾",
        
        # Export
        'export_data': "ðŸ“Š Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð´Ð°Ð½Ð½Ñ‹Ñ…",
        'all_transactions': "Ð’ÑÐµ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¸",
        'this_month_export': "Ð­Ñ‚Ð¾Ñ‚ Ð¼ÐµÑÑÑ†",
        'last_30_days': "ÐŸÐ¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ 30 Ð´Ð½ÐµÐ¹",
        'this_year': "Ð­Ñ‚Ð¾Ñ‚ Ð³Ð¾Ð´",
        'export_complete': "ðŸ“Š Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½!",
        'no_transactions': "Ð¢Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¹ Ð·Ð° ÑÑ‚Ð¾Ñ‚ Ð¿ÐµÑ€Ð¸Ð¾Ð´ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾.",
        
        # Errors
        'error_occurred': "âŒ ÐŸÑ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð° Ð¾ÑˆÐ¸Ð±ÐºÐ°. ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ ÐµÑ‰Ðµ Ñ€Ð°Ð·.",
        'not_found': "ÐÐµ Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾",
        'invalid_input': "ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ Ð²Ð²Ð¾Ð´",
    }
}

def get_text(key: str, lang: str = 'EN', **kwargs) -> str:
    """Get translated text for given key and language"""
    if lang not in translations:
        lang = 'EN'
    
    if key not in translations[lang]:
        return translations['EN'].get(key, key)
    
    text = translations[lang][key]
    
    # Format with kwargs if provided
    if kwargs:
        return text.format(**kwargs)
    
    return text

def get_currency_symbol(currency: str) -> str:
    """Get currency symbol"""
    symbols = {
        'USD': '$',
        'RUB': 'â‚½',
        'EUR': 'â‚¬',
        'GBP': 'Â£'
    }
    return symbols.get(currency, currency)